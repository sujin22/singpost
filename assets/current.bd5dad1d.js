import"./modulepreload-polyfill.c7c6310f.js";const ot="#000000",C="#999",f="#1344ff",E="#0098ff",B="#4cda64",nt="#fc75b7",it="#7766f5",ct="#e1ad7d",$="#6F6F6F",S="#a3a3a3",b="#d4d4d4",v="#9b9b9b",st="#c1c8fc",lt="#FFD9EC",A=new URLSearchParams(window.location.search),D=`${A.get("fname")}.json`,M=A.get("car_id");console.log(`fname: ${D}`);console.log(`carID : ${M}`);const k=0,w=1;var p=!1,g;async function rt(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`JSON \uC77D\uAE30 \uC624\uB958: ${t.status} ${t.statusText}`);return(await t.json()).result.filter(o=>o.CAR_NUM===M).map(o=>{const{VISIT_ORDER:c,Y:l,X:n,ZIP_CODE:s,ADDRESS_FULL:a,OPEN_TIME:m,CLOSE_TIME:_,ORDER_VOLUME:r,BOX_NUM:u,OPT_ARR_TIME_HM:d,EST_PROC_TIME:U,NM_COUNT:N,BOX_COUNT:F,E:P,PLACE_ID:W}=o,z=parseInt(c),q=parseFloat(l),j=parseFloat(n),V=s,J=a,X=dt(parseInt(m)),G=ut(parseInt(_)),Y=parseFloat(r),Z=parseInt(u),x=d,K=parseInt(U),Q=parseInt(N),tt=parseInt(F),et=parseInt(P);return{visit_order:z,latitude:q,longitude:j,zip_code:V,address:J,open_time:X,close_time:G,order_volume:Y,box_num:Z,arrival_time:x,dwell_time:K,nm_count:Q,box_count:tt,e:et,place_id:W}})}catch(t){return console.error("JSON \uC77D\uAE30 \uC624\uB958:",t),[]}}function at(){window.history.back()}const h=document.getElementById("btn_back");h==null||h.addEventListener("click",at);function dt(e){const t=Math.floor(e/60),i=e%60;return`${t.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`}function ut(e){if(e>=1440)return"23:59";{const t=Math.floor(e/60),i=e%60;return`${t.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`}}function mt(e){const t=parseInt(e.split(":")[0]);return t>=0&&t<=11?"#FFA7A7":t>=12&&t<=14?"#FAED7D":t>=15&&t<=17?"#B7F0B1":"#6799FF"}function _t(e){const t=document.getElementById("data-list");t&&(t.innerHTML="",e.forEach((i,o)=>{const c=document.createElement("li");c.className="data-item";const l=e[o].e==1?"blue":"black",n=(o+1).toString();c.innerHTML=`
                    <div id ="arrival_time_${n}" class="arrival-time">${i.arrival_time}</div>
                    <div class="index-circle" 
                        style="
                        background-color: ${mt(e[o].arrival_time)}; 
                        border-color: ${l}
                        ">
                        <span>${n}</span>
                    </div>
                    <div class="item-content">
                        <div class="item-header">
                            <div class="header-info">
                                <div id="zipcode_${n}" class="zipcode">${i.zip_code}</div>
                                <div id="address_${n}" class="address">${i.address.slice(0,15)+".."}</div>
                                <div class="delivery_info_item">
                                    <img src="./img/ico_map_pin.png">
                                    <p id="distance_${n}">0.0km</p>
                                    <img src="./img/ico_map_box.png">
                                    <p id="weight_${n}">3.114kg</p>
                                </div>
                                <div class="delivery_info_item">
                                    <img src="./img/ico_info.png">
                                    <p id="status_${n}">Waiting</p>
                                </div>
                            </div>
                            <img class="detail_btn" id="detail_btn_${n}" src="./img/ico_submenu.png">
                        </div>
                        <div class="btn_area">
                            <div class="btn_item" id="btn_directions_${n}">
                                <img id="img_directions_${n}" src="./img/ico_navi.png">
                                <p id="title_directions_${n}" style="color: #0098ff">Directions</p>
                            </div>
                            <div class="btn_item" id="btn_call_${n}">
                                <img id="img_call_${n}" src="./img/ico_call.png">
                                <p id="title_call_${n}" style="color: #4cda64">Call</p>
                            </div>
                            <div class="btn_item" id="btn_status_${n}">
                                <img id="img_status_${n}" src="./img/ico_start.png">
                                <p id="title_status_${n}" style="color: #fc75b7">Departure</p>
                            </div>
                        </div>
                    </div>
                 `,t.appendChild(c),document.getElementById("detail_btn_"+n).addEventListener("click",r=>{H(r,w,o+1)}),document.getElementById("btn_directions_"+n).addEventListener("click",r=>{const u="1.3115397247608183,103.82648290864407";window.open(`https://www.google.com/maps/dir/?api=1&origin=${u}&destination=${i.latitude},${i.longitude}`,"_blank")}),document.getElementById("btn_call_"+n).addEventListener("click",r=>{window.location.href="tel:010-1111-2222"}),document.getElementById("btn_status_"+n).addEventListener("click",r=>{yt(o+1)}),o+1==1?y(T,o+1):o+1==2?y(I,o+1):y(O,o+1)}))}document.addEventListener("click",e=>{const t=e.target;p&&!g.contains(t)&&t.className!=="detail_btn"&&(console.log("\uC635\uC158 \uBA54\uB274 \uC678 \uC601\uC5ED \uD074\uB9AD"),console.log(t),g.remove(),p=!1)});document.addEventListener("scroll",function(e){console.log("\uC2A4\uD06C\uB864 \uC774\uBCA4\uD2B8\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4."),g&&(g.remove(),p=!1)});function gt(e){const t=document.getElementById("dateText");t.innerText=D.slice(0,5),document.getElementById("btn_submenu").addEventListener("click",o=>{H(o,k,e)})}function ft(e,t,i){t.innerHTML=`
            <div class="option-item">Entirety Undeliverable</div>
            <div class="option-item">Refresh</div>
        `,document.body.appendChild(t),p=!0,t.querySelectorAll(".option-item").forEach(o=>{o.addEventListener("click",()=>{if(console.log(`\uC120\uD0DD\uD55C \uC635\uC158: ${o.textContent}`),console.log("\uC635\uC158 \uBA54\uB274 \uC0AD\uC81C"),t.remove(),p=!1,o.textContent=="Entirety Undeliverable"){console.log("\uC804\uCCB4\uC6B4\uC1A1\uBD88\uAC00");for(var c=1;c<i+1;c++)y(L,c)}else o.textContent=="Refresh"&&location.reload()})})}function pt(e,t,i){t.innerHTML=`
        <div class="option-item">Undeliverable</div>
    `,document.body.appendChild(t),p=!0,t.querySelectorAll(".option-item").forEach(o=>{o.addEventListener("click",()=>{console.log(`\uC120\uD0DD\uD55C \uC635\uC158: ${o.textContent}`),console.log("\uC635\uC158 \uBA54\uB274 \uC0AD\uC81C"),t.remove(),p=!1,y(L,i)})})}function H(e,t,i){p&&(g.remove(),p=!1),console.log("\uC138\uBD80\uBA54\uB274 \uD074\uB9AD");const c=e.target.getBoundingClientRect();g=document.createElement("div"),g.className="option-menu",g.style.position="absolute",g.style.top=`${c.bottom+window.scrollY}px`;const n=(window.innerWidth||document.documentElement.clientWidth)*.3,s=c.right-n;g.style.left=`${s}px`,t==k?ft(e,g,i):t==w&&i!==void 0&&pt(e,g,i)}const O=0,I=1,R=2,T=3,L=4;function y(e,t){const i=document.getElementById("arrival_time_"+t),o=document.getElementById("zipcode_"+t),c=document.getElementById("address_"+t),l=document.getElementById("distance_"+t),n=document.getElementById("weight_"+t),s=document.getElementById("status_"+t),a=document.getElementById("img_directions_"+t),m=document.getElementById("title_directions_"+t),_=document.getElementById("img_call_"+t),r=document.getElementById("title_call_"+t),u=document.getElementById("img_status_"+t),d=document.getElementById("title_status_"+t);e==O?(o&&(o.style.color=ot),c&&(c.style.color=C),l&&(l.style.color=C),n&&(n.style.color=C),s&&(s.style.color=C,s.innerHTML="Waiting"),a&&_&&u&&(a.src="./img/ico_navi.png",_.src="./img/ico_call.png",u.src="./img/ico_start.png"),m&&r&&d&&(m.style.color=E,r.style.color=B,d.style.color=nt,d.innerHTML="Departure")):e==I?(o&&(o.style.color=f),c&&(c.style.color=f),l&&(l.style.color=f),n&&(n.style.color=f),s&&(s.style.color=f,s.innerHTML="In Progress"),a&&_&&u&&(a.src="./img/ico_navi.png",_.src="./img/ico_call.png",u.src="./img/ico_arrive.png"),m&&r&&d&&(m.style.color=E,r.style.color=B,d.style.color=it,d.innerHTML="Arrive")):e==R?(o&&(o.style.color=f),c&&(c.style.color=f),l&&(l.style.color=f),n&&(n.style.color=f),s&&(s.style.color=f,s.innerHTML="Arrived"),a&&_&&u&&(a.src="./img/ico_navi.png",_.src="./img/ico_call.png",u.src="./img/ico_complete.png"),m&&r&&d&&(m.style.color=E,r.style.color=B,d.style.color=ct,d.innerHTML="Complete")):e==T?(i&&(i.style.backgroundColor=v),o&&(o.style.color=$),c&&(c.style.color=S),l&&(l.style.color=b),n&&(n.style.color=b),s&&(s.style.color=st,s.innerHTML="Completed"),a&&_&&u&&(a.src="./img/ico_navi_disable.png",_.src="./img/ico_call_disable.png",u.style.visibility="hidden"),m&&r&&d&&(m.style.color=v,r.style.color=v,d.style.visibility="hidden")):e==L&&(i&&(i.style.backgroundColor=v),o&&(o.style.color=$),c&&(c.style.color=S),l&&(l.style.color=b),n&&(n.style.color=b),s&&(s.style.color=lt,s.innerHTML="Canceled"),a&&_&&u&&(a.src="./img/ico_navi_disable.png",_.src="./img/ico_call_disable.png",u.style.visibility="hidden"),m&&r&&d&&(m.style.color=v,r.style.color=v,d.style.visibility="hidden"))}function yt(e){var s;var t=document.getElementById("myModal");t.style.display="flex";const i=(s=document.getElementById("title_status_"+e))==null?void 0:s.innerHTML;var o=document.querySelector(".modal-header p"),c=document.querySelector(".modal-body p"),l=document.querySelector(".confirm"),n=document.querySelector(".cancel");n.onclick=function(){t.style.display="none"},window.onclick=function(a){a.target==t&&(t.style.display="none")},i=="Departure"?(o.innerHTML="Departure",c.innerHTML="Would you like to start the shipment?",l.onclick=function(){y(I,e),t.style.display="none"}):i=="Arrive"?(o.innerHTML="Arrive",c.innerHTML="Would you like to process the arrival of the shipment?",l.onclick=function(){y(R,e),t.style.display="none"}):i=="Complete"&&(o.innerHTML="Complete",c.innerHTML="Would you like to complete the shipment processing?",l.onclick=function(){y(T,e),t.style.display="none"})}async function vt(){try{const e=await rt(`/singpost-deploy/data/input-data/${D}`);if(e.length>0){gt(e.length),_t(e);const t=document.getElementById("floating-btn");t==null||t.addEventListener("click",()=>{console.log("Floating button clicked!")})}else console.error("\uB370\uC774\uD130\uB97C \uBD88\uB7EC\uC624\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.")}catch(e){console.error("\uB370\uC774\uD130 \uB85C\uB529 \uC624\uB958:",e)}}vt();
